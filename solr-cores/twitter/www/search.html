<html>
	<head>
		<title>search</title>
		<script type="text/javascript" src="jquery-1.8.3.min.js"></script>
	</head>
	<body>

		<form id="query_form">
			<input type="text" name="query" id="query" size="40" />
			<input type="submit" value="SEARCH" />
		</form>

		<div id="results"></div>
	</body>

	<script type="text/javascript">

	function search(args){

		args['rows'] = 50;
		args['sort'] = 'created_at desc';

		var solr_endpoint = 'http://localhost:8983/solr/twitter/select';

		var onsuccess = function(rsp){
			var response = rsp['response'];
			var docs = response['docs'];
			var count = docs.length;

			var html = '';
			html += '<ul>';

			for (var i=0; i < count; i++){
				var tweet = docs[i];

				html += '<li>';
				html += tweet['text'];
				html += ' â€“ @' + tweet['username'];
				html += ', ' + tweet['created_at'];
				html += '</li>';
			}

			html += '</ul>';

			$("#results").html(html);
		};

		$.ajax({
			url: solr_endpoint,
			data: args,
			success: onsuccess,
			dataType: 'jsonp',
			jsonp: 'json.wrf'
		});

		$("#results").html("");
	}

	$(document).ready(function(){

		$("#query_form").submit(function(){
			var query = $("#query").val();

			if (query){
				var args = {'q': query};
				search(args);
			}

			return false;
		});

	});
	
	</script>
</html>
